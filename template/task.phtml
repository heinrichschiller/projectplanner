<div>
    <?php if(isset($task)): ?>
        <form action="<?= \App::getBaseUrl(); ?>task/update" method="post">
    <?php else: ?>
        <form action="<?= \App::getBaseUrl(); ?>task/add" method="post">
    <?php endif; ?>
        <div>
            <?php if(isset($task)): ?>
                <h2>Aufgabe</h2>
            <?php else: ?>
                <h2>Neue Aufgabe</h2>
            <?php endif; ?>
        </div>
        <div>
            <label for="name">Titel:</label>
            <input type="text" name="title" value="<?= isset($task) ? $task->getTitle() : ''; ?>" id="name">
        </div>
        <div>
            <label for="contact">Kontakt:</label>
            <select id="contact" name="contactId">
                <?php foreach ($contacts as $contact): ?>
                <option value="<?= $contact->getId(); ?>"><?= $contact->getName(); ?></option>
                <?php endforeach; ?>
            </select>
        <div>
            <label for="project">Projekt.:</label>
            <select id="project" name="projectId">
                <?php foreach ($projects as $project): ?>
                <option value="<?= $project->getId(); ?>" <?= (isset($projectId) && $projectId == $project->getId()) ? ' selected' : ''; ?>><?= $project->getTitle(); ?></option>
                <?php endforeach; ?>
            </select>
        </div>
        <div>
            <label for="desc">Beschreibung:</label>
            <textarea name="desc" id="desc"><?= isset($task) ? $task->getDesc() : ''; ?></textarea>
        </div>
        <div>
            <label for="begin">Anfang:</label>
            <?php if(isset($task)): ?>
            <input type="date" name="begin" value="<?= $task->getBegin(); ?>" id="begin">
            <?php else: ?>
            <input type="date" name="begin" id="begin">
            <?php endif; ?>
            <label for="end">Ende:</label>
            <input type="date" name="end" id="end">
        </div>
        <div>
            <label for="status">Status:</label>
            <select id="status" name="status_id">
                <?php foreach ($statusList as $status): ?>
                    <?php if(isset($task)): ?>
                    <option value="<?= $status['id']; ?>" <?= ($status['id'] == $task->getStatusId()) ? ' selected' : ''; ?>><?= $status['desc']; ?></option>
                    <?php else: ?>
                    <option value="<?= $status['id']; ?>"><?= $status['desc']; ?></option>
                    <?php endif; ?>
                <?php endforeach; ?>
            </select>
        </div>
        <div>
            <label for="priority">Priorit√§t:</label>
            <select name="priority_id" id="priority">
                <option value="4">Niedrig</option>
                <option value="3">Mittel</option>
                <option value="2">Hoch</option>
                <option value="1">Sehr Hoch</option>
            </select>
        </div>
        <div class="button-row">
            <button type="submit" class="button">Speichern</button>
            <button type="reset" class="button">Abbrechen</button>
        </div>
    </form>
</div>
